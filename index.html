<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>ุฅุฏุงุฑุฉ ูุงูู โ ูุณุฎุฉ ูุชูุฏูุฉ v3.0</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="topbar">
        <div class="title">
            <h1>ุฅุฏุงุฑุฉ ูุงูู</h1>
            <div class="topbar-actions">
                <span id="alertBadge" class="notification-badge" style="display: none;"></span>
                <label class="switch">
                    <input type="checkbox" id="themeToggle">
                    <span class="slider"></span>
                </label>
            </div>
        </div>
    </div>

    <div class="container">
        <section id="summary" class="grid cols-2">
            <div class="card full">
                <h2>๐ ุงูููุฎุต ุงูุดูุฑู <input type="month" id="monthPicker" class="btn ghost"></h2>
                <div class="kpis">
                    <div class="kpi">
                        <div class="lbl">๐ฐ ุงูุฏุฎู</div>
                        <div class="val" id="kpiIncome">0 ุฑ.ุณ</div>
                    </div>
                    <div class="kpi">
                        <div class="lbl">๐ธ ุงููุตุฑููุงุช</div>
                        <div class="val" id="kpiOut">0 ุฑ.ุณ</div>
                    </div>
                    <div class="kpi">
                        <div class="lbl">๐ฆ ุงูุงุฏุฎุงุฑ</div>
                        <div class="val" id="kpiSave">0 ุฑ.ุณ</div>
                    </div>
                    <div class="kpi">
                        <div class="lbl">๐ต ุงูุตุงูู</div>
                        <div class="val" id="kpiNet">0 ุฑ.ุณ</div>
                    </div>
                </div>
                <div class="mt-4">
                    <div class="progress-bar-container">
                        <div class="progress-bar">
                            <div id="savingProgress" class="progress-fill"></div>
                        </div>
                        <div class="progress-label">ูุฏู ุงูุงุฏุฎุงุฑ</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>๐ ุงูุฑุณูู ุงูุจูุงููุฉ</h2>
                <div class="charts">
                    <div class="chart-container">
                        <canvas id="chartMonthly"></canvas>
                    </div>
                    <div class="chart-container">
                        <canvas id="chartBreakdown"></canvas>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2>๐ ุชูุงุตูู ุงูุดูุฑ</h2>
                <div class="table-container">
                    <table id="monthSummary" class="table">
                        <!-- Summary table content will be generated here -->
                    </table>
                </div>
            </div>
        </section>

        <section id="installments" class="card">
            <h2>๐ฆ ุงูุฃูุณุงุท ุงูุดูุฑูุฉ</h2>
            <div class="table-container">
                <table id="instTable" class="table">
                    <thead>
                        <tr>
                            <th>ุงูุงุณู</th>
                            <th class="fit">ุงููุจูุบ</th>
                            <th class="fit">ุงููุฏู</th>
                            <th class="fit">ููู ุงูุงุณุชุญูุงู</th>
                            <th class="fit">ุงุณุชุญูุงู ูุฐุง ุงูุดูุฑ</th>
                            <th class="fit">ุงูุญุงูุฉ</th>
                            <th class="fit">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Installments will be generated here -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="bills" class="card">
            <h2>๐งพ ุงูููุงุชูุฑ ุงููุชูุฑุฑุฉ</h2>
            <div class="table-container">
                <table id="billTable" class="table">
                    <thead>
                        <tr>
                            <th>ุงูุงุณู</th>
                            <th class="fit">ุงููุจูุบ</th>
                            <th class="fit">ุงููุฏู</th>
                            <th class="fit">ููู ุงูุงุณุชุญูุงู</th>
                            <th class="fit">ุงุณุชุญูุงู ูุฐุง ุงูุดูุฑ</th>
                            <th class="fit">ุงูุญุงูุฉ</th>
                            <th class="fit">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Bills will be generated here -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="expenses" class="card">
            <h2>๐ณ ุงููุตุงุฑูู ุงูููููุฉ</h2>
            <div class="toolbar mb-4">
                <input type="search" id="searchInput" placeholder="๐ ุงุจุญุซ ูู ุงููุตุงุฑูู...">
                <button id="exportCSV" class="btn ghost">๐ ุชุตุฏูุฑ CSV</button>
                <button id="exportJSON" class="btn ghost">๐พ ุชุตุฏูุฑ ุงููู (JSON)</button>
                <div class="total-display">ุงูุฅุฌูุงูู: <span id="expShownTotal">0</span></div>
            </div>
            <div class="table-container">
                <table id="expTable" class="table">
                    <thead>
                        <tr>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูุชุตููู</th>
                            <th>ุงููุตู</th>
                            <th class="fit">ุงูุฏูุน</th>
                            <th class="fit">ุงููุจูุบ</th>
                            <th class="fit">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Expenses will be generated here -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="one-time" class="card">
            <h2>โ๏ธ ุงููุตุงุฑูู ุงูุฎุงุฑุฌูุฉ</h2>
            <div class="table-container">
                <table id="oneTable" class="table">
                    <thead>
                        <tr>
                            <th>ุงูุชุงุฑูุฎ</th>
                            <th>ุงูููุน</th>
                            <th>ููุงุญุธุฉ</th>
                            <th class="fit">ุงููุจูุบ</th>
                            <th class="fit">ุงูุญุงูุฉ</th>
                            <th class="fit">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- One-time expenses will be generated here -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="budgets" class="card">
            <h2>๐ฏ ุงูููุฒุงููุงุช</h2>
            <div class="table-container">
                <table id="budTable" class="table">
                    <thead>
                        <tr>
                            <th>ุงูุชุตููู</th>
                            <th class="fit">ุงูุญุฏ ุงููุญุฏุฏ</th>
                            <th class="fit">ุงููุตุฑูู ุงูุญุงูู</th>
                            <th class="fit">ุงููุณุจุฉ ุงููุณุชุฎุฏูุฉ</th>
                            <th class="fit">ุงูุฅุฌุฑุงุกุงุช</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Budgets will be generated here -->
                    </tbody>
                </table>
            </div>
        </section>

        <section id="settings" class="card">
            <h2>โ๏ธ ุงูุฅุนุฏุงุฏุงุช</h2>
            <div class="grid cols-2">
                <div>
                    <label for="salaryInput">ุงูุฏุฎู ุงูุดูุฑู ุงูุฃุณุงุณู</label>
                    <input type="number" id="salaryInput" placeholder="ุฃุฏุฎู ุฑุงุชุจู ุงูุดูุฑู">
                </div>
                <div>
                    <label for="savingTargetInput">ุงูุงุฏุฎุงุฑ ุงููุณุชูุฏู ุดูุฑูุงู</label>
                    <input type="number" id="savingTargetInput" placeholder="ุฃุฏุฎู ูุฏู ุงูุงุฏุฎุงุฑ">
                    <button id="applySuggestedBtn" class="btn ghost mt-2">๐ก ุชุทุจูู ุงูุงุฏุฎุงุฑ ุงูููุชุฑุญ (15%)</button>
                </div>
                <div class="full">
                    <label class="checkbox-container">
                        <input type="checkbox" id="cashMode">
                        <span>ุชูุนูู ูุถุน ุงููุงุด (ุงููุตุฑููุงุช ูุง ุชุฎุตู ูู ุงูุตุงูู ุฅูุง ุนูุฏ ุงูุฏูุน ูุฏููุงู)</span>
                    </label>
                    <label class="checkbox-container">
                        <input type="checkbox" id="autoDeduct">
                        <span>ุฎุตู ุงูุฃูุณุงุท ูุงูููุงุชูุฑ ุชููุงุฆูุงู ุนูุฏ ุญููู ููู ุงูุงุณุชุญูุงู</span>
                    </label>
                    <label class="checkbox-container">
                        <input type="checkbox" id="rollover">
                        <span>ุชุฑุญูู ุงููุชุฃุฎุฑุงุช ูู ุงูุดูุฑ ุงูุณุงุจู ุฅูู ุงูุดูุฑ ุงูุญุงูู</span>
                    </label>
                </div>
            </div>
            <div class="mt-4">
                <button id="saveSettingsBtn" class="btn primary">๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
            </div>
        </section>
    </div>

    <div class="fab">โ</div>

    <div id="modal" class="modal">
        <div class="sheet">
            <div class="handle"></div>
                <button id="closeModal" class="btn danger" style="position:absolute;top:10px;left:10px;">โ</button>
            <div class="grid cols-2">
                <form id="instForm" class="card">
                    <h2>ุฅุถุงูุฉ ูุณุท</h2>
                    <input type="text" id="instName" placeholder="ุงุณู ุงููุณุท (ุณูุงุฑุฉ, ุฌูุงู...)" required>
                    <input type="number" id="instAmount" placeholder="ูุจูุบ ุงููุณุท ุงูุดูุฑู" required>
                    <input type="date" id="instStart" required>
                    <input type="date" id="instEnd">
                    <input type="number" id="instDueDay" placeholder="ููู ุงูุงุณุชุญูุงู (1-31)">
                    <button type="submit" class="btn primary mt-4">ุฅุถุงูุฉ ูุณุท</button>
                </form>

                <form id="billForm" class="card">
                    <h2>ุฅุถุงูุฉ ูุงุชูุฑุฉ</h2>
                    <input type="text" id="billName" placeholder="ุงุณู ุงููุงุชูุฑุฉ (ููุฑุจุงุก, ูุงุก...)" required>
                    <input type="number" id="billAmount" placeholder="ุงููุจูุบ ุงูุชูุฏูุฑู ูููุงุชูุฑุฉ" required>
                    <input type="date" id="billStart" required>
                    <input type="date" id="billEnd">
                    <input type="number" id="billDueDay" placeholder="ููู ุงูุงุณุชุญูุงู (1-31)">
                    <button type="submit" class="btn primary mt-4">ุฅุถุงูุฉ ูุงุชูุฑุฉ</button>
                </form>

                <form id="expForm" class="card full">
                    <h2>ุฅุถุงูุฉ ูุตุฑูู</h2>
                    <div class="toolbar">
                        <input type="date" id="expDate" class="grow" required>
                        <input type="text" id="expCat" placeholder="ุงูุชุตููู (ุทุนุงู, ููุงุตูุงุช...)" class="grow" required>
                        <input type="text" id="expNote" placeholder="ููุงุญุธุฉ (ุงุฎุชูุงุฑู)" class="grow">
                        <select id="expPay" class="grow">
                            <option value="cash">๐ต ูุงุด</option>
                            <option value="card">๐ณ ุจุทุงูุฉ</option>
                            <option value="transfer">๐ฆ ุชุญููู</option>
                            <option value="wallet">๐ฑ ูุญูุธุฉ</option>
                        </select>
                        <input type="number" id="expAmount" placeholder="ุงููุจูุบ" class="grow" required>
                        <button type="submit" class="btn success">ุฅุถุงูุฉ ูุตุฑูู</button>
                    </div>
                </form>

                <form id="oneForm" class="card">
                    <h2>ุฅุถุงูุฉ ูุตุฑูู ุฎุงุฑุฌู</h2>
                    <input type="date" id="oneDate" required>
                    <input type="text" id="oneCat" placeholder="ููุน ุงููุตุฑูู (ูุฏูุฉ, ุณูุฑ...)" required>
                    <input type="text" id="oneNote" placeholder="ููุงุญุธุฉ (ุงุฎุชูุงุฑู)">
                    <input type="number" id="oneAmount" placeholder="ุงููุจูุบ" required>
                    <label class="checkbox-container">
                        <input type="checkbox" id="onePaid">
                        <span>ุชู ุงูุฏูุน</span>
                    </label>
                    <button type="submit" class="btn secondary mt-4">ุฅุถุงูุฉ ูุตุฑูู ุฎุงุฑุฌู</button>
                </form>

                <form id="budForm" class="card">
                    <h2>ุฅุถุงูุฉ ุฃู ุชุญุฏูุซ ููุฒุงููุฉ</h2>
                    <input type="text" id="budCat" placeholder="ุชุตููู ุงูููุฒุงููุฉ (ููุณ ุชุตููู ุงููุตุงุฑูู)" required>
                    <input type="number" id="budLimit" placeholder="ุงูุญุฏ ุงูุฃุนูู ููููุฒุงููุฉ" required>
                    <button type="submit" class="btn warning mt-4">ุญูุธ ุงูููุฒุงููุฉ</button>
                </form>
            </div>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <div class="bottom-nav">
        <a href="#summary" class="active"><span class="icon">๐</span> ุงูููุฎุต</a>
        <a href="#installments"><span class="icon">๐ฆ</span> ุงูุฃูุณุงุท</a>
        <a href="#bills"><span class="icon">๐งพ</span> ุงูููุงุชูุฑ</a>
        <a href="#expenses"><span class="icon">๐ณ</span> ุงููุตุงุฑูู</a>
        <a href="#settings"><span class="icon">โ๏ธ</span> ุงูุฅุนุฏุงุฏุงุช</a>
    </div>

    <script src="script.js"></script>
</body>

</html>

